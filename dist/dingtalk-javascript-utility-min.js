"use strict";function parse(e,r,n){var o=Object.create(null);if("string"!=typeof e||0===e.length)return o;r=r||"&",n=n||"=";for(var i=e.split(r),t=0,a=i.length;t<a;t++){var l=i[t].split(n),s=l[0].trim(),u="";l.length>=3?function(){l.splice(0,1);var e=l.length-1;l.forEach(function(r,o){r=r.trim(),u+=o===e?r:r+n})}():u=l[1].trim();var d=o[s];if(d)if(Array.isArray(d))d.push(decodeURIComponent(u));else{var c=d;o[s]=new Array,o[s].push(c),o[s].push(decodeURIComponent(u))}else o[s]=decodeURIComponent(u)}return o}function stringify(e,r,n){if(r=r||"&",n=n||"=",null!==e&&"object"===(void 0===e?"undefined":_typeof(e))){for(var o=Object.keys(e),i=o.length,t=i-1,a="",l=0;l<i;l++){var s=o[l],u=e[s],d=s+n;if(Array.isArray(u)){for(var c=u.length,f=c-1,p=0;p<c;++p)a+=d+decodeURIComponent(u[p]),p<f&&(a+=r);c&&l<t&&(a+=r)}else a+=d+decodeURIComponent(u),l<t&&(a+=r)}return a}return""}function format(e,r){return e+"?"+querystring.stringify(r)}function parse$1(e,r){var n={hash:null,search:null};if(!e)return{};var o=e.indexOf("?");if(-1===o)return{};var i=e.indexOf("#");i>-1?(n.hash=e.slice(i),n.search=e.slice(o,i)):n.search=e.slice(o);var t=n.search.slice(1),a=querystring.parse(t);return"string"==typeof r&&r.length>0?a[r]:a}function getEnv(){var e={};if("undefined"!=typeof weex){var r=weex.config,n=r.env;if(e.platform=n.platform,e.bundleFrameworkType="Vue","Web"!==e.platform)e.dingtalk={bundleUrl:r.bundleUrl,originalUrl:r.originalUrl},e.appVersion=n.appVersion,e.appName=n.appName;else{var o=location.href,i=url.parse(o,"dd_wx_tpl"),t=url.parse(o,"_wx_tpl");e.dingtalk={bundleUrl:i||(t||""),originalUrl:o}}}else{if("function"==typeof callNative)e.platform=navigator.platform,e.appName=navigator.appName,e.appVersion=navigator.appVersion,e.dingtalk={bundleUrl:__weex_options__.bundleUrl,originalUrl:__weex_options__.originalUrl};else{e.platform="Web";var a=location.href,l=url.parse(a,"dd_wx_tpl"),s=url.parse(a,"_wx_tpl");e.dingtalk={bundleUrl:l||(s||""),originalUrl:a}}e.bundleFrameworkType="Rax"}return e}function dingtalkContainer(){return isWeex?"DingTalk"===env.appName||"com.alibaba.android.rimet"===env.appName:UA&&UA.indexOf("dingtalk")>-1}function webAndroid(){return isWeb?UA&&UA.indexOf("android")>-1:null}function webiOS(){return isWeb?UA&&/iphone|ipad|ipod|ios/.test(UA):null}function fetchVersion(){if(isWeb){var e=UA.match(/aliapp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===e&&(e=UA.match(/dingtalk\/([a-zA-Z0-9.-]+)/));return e&&e[1]}return env.appVersion}function toPlatform(){var e=void 0;return isDingtalk?isWebAndroid?e="web.android":isWebiOS?e="web.ios":isWeexAndroid?e="weex.android":isWeexiOS&&(e="weex.ios"):e="not.dingtalk",e}function compareVersion(e,r,n){if("string"!=typeof e||"string"!=typeof r)return!1;var o=e.split("."),i=r.split("."),t=void 0,a=void 0;do{t=o.shift(),a=i.shift()}while(t===a&&i.length>0);return n?(0|a)>=(0|t):(0|a)>(0|t)}function requireModule(e){if(isWeex$1){if("Vue"===bundleFrameworkType$1)return weex.requireModule(e);var r="@weex-module/"+e;return __weex_require__(r)}if("Vue"===bundleFrameworkType$1)return weex.requireModule(e)}function Document(){return isWeex$2&&"Vue"===bundleFrameworkType$2?weex.document:document}function setTimeout(e,r){return isWeex$3?(timer.setTimeout(e,r),doc.taskCenter.callbackManager.lastCallbackId.toString()):window.setTimeout(e,r)}function clearTimeout(e){isWeex$3?timer.clearTimeout(e):window.clearTimeout(e)}function setInterval(e,r){return isWeex$3?(timer.setInterval(e,r),doc.taskCenter.callbackManager.lastCallbackId.toString()):window.setInterval(e,r)}function clearInterva(e){isWeex$3?timer.clearInterva(e):window.clearInterva(e)}function fillZore(e){var r="00"+e;return r.substring(r.length-2)}function run(e){dingtalkSDK.ready(function(){e(dingtalkSDK.apis)})}function callTransform$1(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,o){run(function(i){var t=e.split("."),a=i;if(t.forEach(function(e){return a=a[e]}),"function"!=typeof a)throw new Error("Not Found");r.onSuccess=function(e){return n(e)},r.onFail=function(e){return o(e)},a(r)})})}function setCallTransformSource$1(e){dingtalkSDK=e||{}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,n=Array(e.length);r<e.length;r++)n[r]=e[r];return n}return Array.from(e)},querystring={stringify:stringify,parse:parse},url={format:format,parse:parse$1},env=getEnv(),isWeb="Web"===env.platform,isWeexiOS="iOS"===env.platform,isWeexAndroid="android"===env.platform,isWeex=isWeexiOS||isWeexAndroid,dingtalk=env.dingtalk,bundleFrameworkType=env.bundleFrameworkType,bundleUrl=dingtalk.bundleUrl,originalUrl=dingtalk.originalUrl,UA=void 0;isWeb&&(UA=window.navigator.userAgent.toLowerCase());var isDingtalk=dingtalkContainer(),isWebiOS=webiOS(),isWebAndroid=webAndroid(),version=fetchVersion(),env$1={isDingtalk:isDingtalk,isWeb:isWeb,isWebiOS:isWebiOS,isWebAndroid:isWebAndroid,isWeex:isWeex,isWeexiOS:isWeexiOS,isWeexAndroid:isWeexAndroid,bundleFrameworkType:bundleFrameworkType,bundleUrl:bundleUrl,originalUrl:originalUrl,version:version,platform:toPlatform()},bundleFrameworkType$1=env$1.bundleFrameworkType,isWeex$1=env$1.isWeex,bundleFrameworkType$2=env$1.bundleFrameworkType,isWeex$2=env$1.isWeex,doc=Document(),timer=requireModule("timer"),isWeex$3=env$1.isWeex,timer$1={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterva:clearInterva},LOG="LOG",INFO="INFO",WARNING="WARNING",ERROR="ERROR",LogType$1={LOG:LOG,INFO:INFO,WARNING:WARNING,ERROR:ERROR},logChannel=function(e){var r,n,o,i,t=fillZore(e.time.getHours())+":"+fillZore(e.time.getMinutes())+":"+fillZore(e.time.getSeconds());switch(e.type){case LogType$1.LOG:(r=console).log.apply(r,["time:"+t+" | log: "].concat(toConsumableArray(e.logArr)));break;case LogType$1.INFO:(n=console).info.apply(n,["time:"+t+" | info: "].concat(toConsumableArray(e.logArr)));break;case LogType$1.ERROR:(o=console).error.apply(o,["time:"+t+" | error: "].concat(toConsumableArray(e.logArr)));break;case LogType$1.WARNING:(i=console).warn.apply(i,["time:"+t+" | warning: "].concat(toConsumableArray(e.logArr)))}},setLog$1=function(e){logChannel=e},log$1=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LogType$1.LOG;logChannel({type:r,logArr:e,time:new Date})},logger={log:log$1,setLog:setLog$1,LogType:LogType$1},dingtalkSDK=void 0,dingtalkCallTransform={callTransform:callTransform$1,setCallTransformSource:setCallTransformSource$1},log=logger.log,setLog=logger.setLog,LogType=logger.LogType,callTransform=dingtalkCallTransform.callTransform,setCallTransformSource=dingtalkCallTransform.setCallTransformSource,index={querystring:querystring,url:url,env:env$1,compareVersion:compareVersion,requireModule:requireModule,document:doc,timer:timer$1,LogType:LogType,setLog:setLog,log:log,callTransform:callTransform,setCallTransformSource:setCallTransformSource};module.exports=index;
//# sourceMappingURL=dingtalk-javascript-utility-min.js.map
